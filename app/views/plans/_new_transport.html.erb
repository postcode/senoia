
<% unique_id = SecureRandom.hex(16) %>

<div id="new-transport-<%= operation_period_index %>" class="new-transport reveal-modal medium asset-modal transport-form" data-url="<%= url_for([ operation_period, :transports ]) %>" data-reveal>
  <a class="close-reveal-modal">&#215;</a>
  <h3>Add TRANSPORT</h3>
  <div class="modal-body">
    <%= simple_fields_for "transport" do |f| %>
      <%= f.input :name, required: false %>
      <%= f.input :provider_id,
      collection: Provider.all,
      label_method: :name,
      value_method: :id,
      include_blank: false,
      prompt: "Select a provider",
      label: "Provider", required: false %>
      <%= f.input :contact_name, required: false %>
      <%= f.input :contact_phone, required: false %>
      <div id='map_transport_<%= unique_id %>' class="asset_map"></div>
      <div id='lat_map_transport_<%= unique_id %>'>
        <%= f.input :lat, input_html: { id: 'lat' }, as: :hidden  %>
      </div>
      <div id="lng_map_transport_<%= unique_id %>">
        <%= f.input :lng, input_html: { id: 'lng' }, as: :hidden %>
      </div>
    <% end %>
  </div>
  <div class="modal-footer">
    <%= link_to "Add TRANSPORT", "javascript:void(0)", class: "save-transport button primary save-modal disabled" %>
  </div>
  <script>
   $(document).ready(function(){
     $(document).on('opened.fndtn.reveal', '.new-transport[data-reveal]', function () {
       map_initialize('map_transport_<%= unique_id %>');    // form map for new view (print nothing with possibility of put marker)
     });
   })
  </script>
</div>